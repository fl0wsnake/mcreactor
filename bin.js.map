{"version":3,"sources":["webpack/bootstrap 2f1af2f2bfe787187df9","D:\\1WebProjects\\mcreactor\\app.ts","external \"es6-shim\"","external \"reflect-metadata\"","external \"koa\"","external \"koa-router\"","D:\\1WebProjects\\mcreactor\\controllers\\AuthController.ts","D:\\1WebProjects\\mcreactor\\models\\models.ts","D:\\1WebProjects\\mcreactor\\models\\Post.ts","D:\\1WebProjects\\mcreactor\\config\\db.ts","external \"sequelize\"","D:\\1WebProjects\\mcreactor\\models\\Commentary.ts","D:\\1WebProjects\\mcreactor\\models\\Tag.ts","D:\\1WebProjects\\mcreactor\\models\\User.ts","D:\\1WebProjects\\mcreactor\\config\\jwt.ts","external \"jsonwebtoken\"","external \"sha256\"","D:\\1WebProjects\\mcreactor\\controllers\\FeedController.ts","external \"koa-multer\"","D:\\1WebProjects\\mcreactor\\controllers\\UserController.ts","D:\\1WebProjects\\mcreactor\\middlewares\\AuthMiddleware.ts","external \"path\"","external \"koa-convert\"","external \"koa-static-folder\"","external \"koa-bodyparser\"","external \"koa-cors\"","D:\\1WebProjects\\mcreactor\\config\\pug.ts","external \"koa-pug\"","external \"koa-json\"","D:\\1WebProjects\\mcreactor\\middlewares\\CookieMiddleware.ts"],"names":[],"mappings":"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","file":"bin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2f1af2f2bfe787187df9","import 'es6-shim'\nimport \"reflect-metadata\";\nimport * as Koa from \"koa\"\nimport * as Router from 'koa-router'\nimport AuthController from './controllers/AuthController'\nimport FeedController from './controllers/FeedController'\nimport UserController from './controllers/UserController'\nimport { Context } from 'koa';\n\nconst path = require('path')\n\nconst convert = require('koa-convert')\n\nconst serve = require('koa-static-folder')\n\nconst app = new Koa()\n\napp.use(require('koa-bodyparser')())\n\napp.use(convert(serve('./public')))\napp.use(convert(serve('./public/images')))\n\nlet cors = require('koa-cors')\n\napp.use(convert(cors()))\n\nimport pug from './config/pug'\n\npug.use(app)\n\napp.use(convert(require('koa-json')()))\n\nimport cookieMiddleware from './middlewares/CookieMiddleware';\n\napp.use(cookieMiddleware)\n\nconst router = new Router()\n\n\nrouter\n    .use('',UserController.routes())\n    .use('',AuthController.routes())\n    .use('',FeedController.routes())\n\napp\n    .use(router.routes())\n    .use(router.allowedMethods())\n\napp.listen(3000)\n\n\n\n// WEBPACK FOOTER //\n// ./app.ts","module.exports = require(\"es6-shim\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-shim\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"reflect-metadata\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"reflect-metadata\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 4\n// module chunks = 0","import { UserAttribute, UserModel } from '../models/User';\nimport { User } from '../models/models';\nimport { generateToken } from '../config/jwt';\nimport { Request } from '~koa/lib/request';\nimport { Response } from '~koa/lib/response';\nimport * as Router from 'koa-router'\nimport { Context } from 'koa';\n\nconst hash = require('sha256')\n\nconst AuthController = new Router()\n\nAuthController\n\n    .get('/login',\n    (ctx: Context) => {\n        ctx.render('auth/login')\n    })\n\n    .post('/login',\n    async (ctx: Context): Promise<any> => {\n        const user = ctx.request.body\n        const found = await User.findOne({\n            where: {\n                email: user.email\n            }\n        })\n        if (found && found.password == hash(user.password))\n            ctx.body =  { success: true, token: generateToken(found.dataValues) }\n        else if (!found)\n            ctx.body =  { success: false, message: 'Wrong email' }\n        else\n            ctx.body = { success: false, message: 'Wrong password' }\n    })\n\n    .get('/register',\n    async (ctx: Context) => {\n        ctx.render('auth/register')\n    })\n    \n    .post('/register',\n    async (ctx: Context) => {\n        let user = ctx.request.body\n        if (user.password != user.confirmPassword)\n            ctx.body = { success: false, message: 'Passwords do not match' }\n        user.password = hash(user.password)\n        try {\n            let createdUser = await User.create(user)\n        }\n        catch (err) {\n            console.log(err)\n            if (err.name == \"SequelizeUniqueConstraintError\")\n                ctx.body =  { success: false, message: 'Email busy' }\n            ctx.body =  { success: false, message: 'Some error' }\n        }\n        ctx.body =  { success: true, message: '' }\n    })\n\nexport default AuthController\n\n\n\n// WEBPACK FOOTER //\n// ./controllers/AuthController.ts","import Post from './Post';\nimport Commentary from './Commentary';\nimport Tag from './Tag';\nimport User from './User';\nimport * as Sequelize from 'sequelize';\nimport db from '../config/db';\n\nPost.belongsTo(User)\n\nUser.hasMany(Post)\n\nUser.hasMany(Commentary)\n\nCommentary.belongsTo(User)\n\nPost.hasMany(Commentary)\n\nCommentary.belongsTo(Post)\n\nconst PostTag = db.define('PostTag',{},{tableName:'PostTag'})\n\nTag.belongsToMany(Post, { through: 'PostTag' })\n\nPost.belongsToMany(Tag, { through: 'PostTag' })\n\n\nUser.sync()\nPost.sync()\nTag.sync()\nCommentary.sync()\nPostTag.sync()\n\nexport { Tag, Commentary, Post, User }\n\n\n\n// WEBPACK FOOTER //\n// ./models/models.ts","/**\n * Created by Monyk on 06.11.2016.\n */\nimport db from '../config/db'\nimport * as Sequelize from \"sequelize\";\n\nexport interface PostAttribute\n{\n    id?:number\n    content?:any\n    createdAt?:number\n    updatedAt?:number\n    tags?: Array<any>\n}\n\nexport interface PostInstance extends Sequelize.Instance<PostAttribute>, PostAttribute\n{}\n\nexport interface PostModel extends Sequelize.Model<PostInstance, PostAttribute>\n{}\n\nconst Post : PostModel = db.define<PostInstance, PostAttribute>(\"Post\", {\n    content: {\n        type: Sequelize.STRING,\n        allowNull: false,\n    }\n}, {\n    timestamps: true\n})\n\nimport Commentary from './Commentary';\n\n\n\nexport default Post\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./models/Post.ts","/**\n * Created by Monyk on 05.11.2016.\n */\nimport * as Sequelize from 'sequelize'\n\nconst db : Sequelize.Sequelize = new Sequelize('mysql://root:root@localhost:3306/mcreactor')\n\n\n\nexport default db\n\n\n\n// WEBPACK FOOTER //\n// ./config/db.ts","module.exports = require(\"sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize\"\n// module id = 9\n// module chunks = 0","/**\n * Created by Monyk on 06.11.2016.\n */\nimport db from '../config/db'\nimport * as Sequelize from \"sequelize\";\n\n\nexport interface CommentaryAttribute\n{\n    id?:number\n    content?:any\n    createdAt?:number\n    updatedAt?:number\n}\n\nexport interface CommentaryInstance extends Sequelize.Instance<CommentaryAttribute>, CommentaryAttribute\n{}\n\nexport interface CommentaryModel extends Sequelize.Model<CommentaryInstance, CommentaryAttribute>\n{}\n\nconst Commentary : CommentaryModel = db.define<CommentaryInstance, CommentaryAttribute>(\"Commentary\", {\n    content: {\n        type: Sequelize.STRING,\n        allowNull: false,\n    }\n}, {\n    timestamps: true\n})\n\n\nexport default Commentary\n\n\n\n// WEBPACK FOOTER //\n// ./models/Commentary.ts","/**\n * Created by Monyk on 06.11.2016.\n */\nimport db from '../config/db'\nimport * as Sequelize from \"sequelize\";\n\nexport interface TagAttribute\n{\n    id?:number\n    name: string\n    createdAt?:number\n    updatedAt?:number\n}\n\nexport interface TagInstance extends Sequelize.Instance<TagAttribute>, TagAttribute\n{}\n\nexport interface TagModel extends Sequelize.Model<TagInstance, TagAttribute>\n{}\n\nconst Tag : TagModel = db.define<TagInstance, TagAttribute>(\"Tag\", {\n    name: {\n        type: Sequelize.STRING,\n        allowNull: false,\n        unique: true\n    }\n}, {\n    indexes:[\n        {\n            fields: ['name'],\n            unique: true\n        }\n    ],\n    timestamps: true,\n})\n\n\nexport default Tag\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./models/Tag.ts","/**\n * Created by Monyk on 06.11.2016.\n */\nimport db from '../config/db'\nimport * as Sequelize from \"sequelize\";\n\nexport interface UserAttribute\n{\n    id?:number\n    nickname?:string\n    email?:string\n    password?:string\n    rating?:number\n    isBanned?:boolean\n    isAdmin?:boolean\n    createdAt?:number\n    updatedAt?:number\n}\n\nexport interface UserInstance extends Sequelize.Instance<UserAttribute>, UserAttribute\n{}\n\nexport interface UserModel extends Sequelize.Model<UserInstance, UserAttribute>\n{}\n\nconst User : UserModel = db.define<UserInstance, UserAttribute>(\"User\", {\n    nickname: {\n        type: Sequelize.STRING(30),\n        allowNull: false,\n    },\n    email: {\n        type: Sequelize.STRING(30),\n        allowNull: false,\n        unique: true\n    },\n    password: {\n        type: Sequelize.STRING(100),\n        allowNull: false\n    },\n    rating: {\n        type: Sequelize.INTEGER,\n        allowNull: true\n    },\n    isBanned: {\n        type: Sequelize.BOOLEAN,\n        allowNull: true\n    },\n    isAdmin: {\n        type: Sequelize.BOOLEAN,\n        allowNull: true\n        \n    },\n}, {\n    timestamps: true\n})\n\n\n\nexport default User\n\n\n\n// WEBPACK FOOTER //\n// ./models/User.ts","import { UserAttribute } from '../models/User';\nconst jwt = require('jsonwebtoken')\n\nconst secret = 'veryverysecret'\n\nexport function generateToken(user : UserAttribute) : string\n{\n    return jwt.sign(user, secret)\n}\n\nexport function verifyToken(token : string | undefined) : UserAttribute | false\n{\n    if(token)\n    {\n        let user\n        try {\n            user = jwt.verify(token, secret)\n        } catch(err)\n        {\n            return false\n        }\n        return user\n    }\n    return false\n}\n\n\n\n// WEBPACK FOOTER //\n// ./config/jwt.ts","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"sha256\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sha256\"\n// module id = 15\n// module chunks = 0","\nimport { Response } from '~koa/lib/response';\nimport { User, Commentary, Tag, Post } from '../models/models';\nimport * as Router from 'koa-router';\nimport { Context } from 'koa';\nimport db from '../config/db';\n\n\nconst multer = require('koa-multer')\nconst upload = multer({ dest: './public/images' })\n\nconst FeedController = new Router()\n\nFeedController\n\n    .get('/',\n    (ctx: Context) => {\n        ctx.render('index')\n    })\n\n    .post('/',\n    upload.single('image'),\n    async (ctx: Context) => {\n        try{\n            let htmlCode = (ctx.req.body.content ? `<p>${ctx.req.body.content}</p>` : '') + `<img src=\"public/images/${ctx.req.file.filename}\"></img>`\n            let tags = ctx.req.body.tags\n                .split(',')\n                .map(tag => { \n                    return { 'name': tag.trim() } \n                })\n\n            await Tag.bulkCreate(tags, {\n                updateOnDuplicate: ['name']\n            })\n\n            let post = await Post.create({\n                content: htmlCode\n            }) as any\n\n            await post.setTags(await Tag.findAll({\n                where:{\n                    name: {\n                        in: ctx.req.body.tags.split(',').map(tag => tag.trim())\n                    }\n                }\n            }))\n            ctx.body = {success: true, message:''}\n        }\n        catch(e)\n        {\n            ctx.body = {success: false, message: `Something went wrong: ${e}`}\n        }\n    })\n\n    .get('/post/:id',\n    async (ctx) => {\n        const id = ctx.params.id\n        const post = Post.findById() \n    })\n\n    .get('/post',\n    async (ctx) => {\n        const posts = await Post.findAll({\n            include: [Tag]\n        })\n        ctx.body = posts.map(post => post.get())\n    })\n\n\nexport default FeedController\n\n\n\n// WEBPACK FOOTER //\n// ./controllers/FeedController.ts","module.exports = require(\"koa-multer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-multer\"\n// module id = 17\n// module chunks = 0","/**\n * Created by Monyk on 05.11.2016.\n */\n\nimport * as Router from 'koa-router';\nimport { Context } from 'koa';\nimport {User} from '../models/models';\nimport authMiddleware from '../middlewares/AuthMiddleware';\n\nconst UserController = new Router()\n\n// UserController.use(authMiddleware)\n\nUserController\n\n    .get('/users',\n    authMiddleware,\n    async (ctx: Context) => {\n        ctx.body = await User.findAll({raw: true, order: 'id'})\n    })\n\n    .get('/users/:id',\n    async (ctx) => {\n        let id = ctx.params.id\n        ctx.body = await User.findById(id, { raw: true })\n    })\n\n    .put('/users/:id',\n    async (ctx: Context) => {\n        let id = ctx.params.id\n        let user = ctx.request.body\n        const foundUser = await User.findById(id)//todo: restring access\n        if (foundUser) {\n            ctx.body = (await foundUser.update(user)).get()\n        }\n        ctx.body = { success: false, message: 'User not found' }\n    })\n\nexport default UserController\n\n\n\n\n// WEBPACK FOOTER //\n// ./controllers/UserController.ts","import { Middleware, MiddlewareInterface} from 'routing-controllers';\nimport {Context} from 'koa'\nimport { UserAttribute } from '../models/User';\nimport { verifyToken } from '../config/jwt';\n\n\n\n\n\nconst authMiddleware =  (context: Context, next: (err?: any) => Promise<any>): Promise<any> | null  => {\n        let token = false\n        if(context.cookie)\n            token = context.cookie.token\n        if(token)\n        {\n            const user : UserAttribute | boolean = verifyToken(token.toString())\n            if(user)\n            {\n                context.user = user\n                return next()\n            }\n        }\n        context.response.status = 403\n        context.response.body = '403 Forbidden'\n        return\n    }\n\nexport default authMiddleware\n\n\n\n// WEBPACK FOOTER //\n// ./middlewares/AuthMiddleware.ts","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"koa-convert\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-convert\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"koa-static-folder\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-static-folder\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"koa-cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-cors\"\n// module id = 24\n// module chunks = 0","const Pug = require('koa-pug')\n\nconst pug = new Pug({\n  viewPath: './views',\n  noCache: true\n})\n\nexport default pug\n\n\n\n// WEBPACK FOOTER //\n// ./config/pug.ts","module.exports = require(\"koa-pug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-pug\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"koa-json\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-json\"\n// module id = 27\n// module chunks = 0","import { MiddlewareGlobalBefore, MiddlewareInterface } from 'routing-controllers'\nimport { Context } from 'koa'\n\n\n\nconst cookieMiddleware = (context: Context, next: (err?: any) => Promise<any>): Promise<any> | null => {\n        const cookieHeader = context.headers.cookie\n        if (cookieHeader) {\n            const cookies = cookieHeader.split(';')\n            context.cookie = {}\n            cookies.forEach(function (item) {\n                const crumbs = item.split('=');\n                if (crumbs.length > 1) context.cookie[crumbs[0].trim()] = crumbs[1].trim()\n            })\n        }\n        return next()\n    }\n\nexport default cookieMiddleware\n\n\n\n// WEBPACK FOOTER //\n// ./middlewares/CookieMiddleware.ts"],"sourceRoot":""}